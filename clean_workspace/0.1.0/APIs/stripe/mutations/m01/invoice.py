# This file is automatically generated by the MutationBuilder

def issue_new_bill(billed_customer_id, payment_due_period_days=None):
    """
    This tool will create an invoice in Stripe.

    This tool creates an invoice in Stripe. It takes the ID of the customer (`customer`) for whom to create the invoice, and an optional number of days (`days_until_due`) until the invoice is due.

    Args:
        billed_customer_id (str): The ID of the customer to create the invoice for.
        payment_due_period_days (Optional[int]): The number of days until the invoice is due.

    Returns:
        Dict[str, Any]: The Stripe invoice object created. This dictionary contains the following keys:
            id (str): Unique identifier for the invoice.
            object (str): String representing the object's type, typically "invoice".
            customer (str): The ID of the customer this invoice is for.
            status (str): The status of the invoice (e.g., "draft", "open", "paid", "void", "uncollectible").
            total (int): Total amount due in cents.
            amount_due (int): The amount due on the invoice, in cents.
            currency (str): Three-letter ISO currency code.
            created (int): Unix timestamp of when the invoice was created.
            due_date (Optional[int]): Unix timestamp of the date on which payment for this invoice is due.
            livemode (bool): Indicates if the object exists in live mode or test mode.
            metadata (Optional[Dict[str, str]]): A set of key-value pairs attached to the invoice.
            lines (Dict[str, Any]): A list object representing the individual line items of the invoice. This dictionary contains:
                object (str): String representing the object's type, typically "list".
                data (List[Dict[str, Any]]): A list where each element is an invoice line item dictionary. Each such dictionary contains:
                    id (str): Unique identifier for the line item.
                    amount (int): The amount of the line item, in cents.
                    description (Optional[str]): An arbitrary string description for the line item.
                    price (Optional[Dict[str, Any]]): The price object used for this line item. This dictionary may contain:
                        id (str): Unique identifier of the price object.
                        product (str): ID of the product associated with this price.
                    quantity (Optional[int]): The quantity of the line item.
                has_more (bool): True if there are more line items to be fetched for this invoice (pagination).

    Raises:
        InvalidRequestError: If the billed_customer_id ID is invalid or other parameters are malformed.
        ResourceNotFoundError: If the specified billed_customer_id ID does not exist.
        ValidationError: If input arguments fail validation.
    """
    from stripe.invoice import create_invoice
    return create_invoice(customer=billed_customer_id, days_until_due=payment_due_period_days)


def add_item_to_bill(target_customer_id, product_price_id, destination_invoice_id):
    """
    This tool will create an invoice item in Stripe.

    This function creates an invoice item in Stripe. It uses the provided customer ID,
    price ID, and invoice ID to define the new invoice item's associations and
    link it to the respective customer, product/service price, and invoice.

    Args:
        target_customer_id (str): The ID of the customer to create the invoice item for.
        product_price_id (str): The ID of the price for the item.
        destination_invoice_id (str): The ID of the invoice to create the item for.

    Returns:
        Dict[str, Any]: A dictionary representing the Stripe invoice item object that was created, with the following keys:
            id (str): Unique identifier for the invoice item.
            object (str): String representing the object's type, typically "invoiceitem".
            customer (str): The ID of the customer this invoice item is associated with.
            invoice (Optional[str]): The ID of the invoice this invoice item belongs to (if any).
            price (Optional[Dict[str, Any]]): The price object related to this invoice item. If present, it contains:
                id (str): The ID of the price.
                product (str): The ID of the product this price is for.
                unit_amount (Optional[int]): The unit amount in cents (if applicable).
                currency (str): Three-letter ISO currency code.
            amount (int): The amount in cents.
            currency (str): Three-letter ISO currency code.
            quantity (int): Quantity of the item.
            livemode (bool): Indicates if the object exists in live mode or test mode.
            metadata (Optional[Dict[str, str]]): A set of key-value pairs.

    Raises:
        InvalidRequestError: If target_customer_id ID, product_price_id ID, or destination_invoice_id ID are invalid or parameters are malformed.
        ResourceNotFoundError: If any of the specified IDs (target_customer_id, product_price_id, destination_invoice_id) do not exist.
        ApiError: For other general Stripe API errors.
    """
    from stripe.invoice import create_invoice_item
    return create_invoice_item(
        customer=target_customer_id,
        price=product_price_id,
        invoice=destination_invoice_id
    )


def complete_and_send_bill(invoice_id_to_finalize):
    """
    This tool will finalize an invoice in Stripe.

    This function finalizes an invoice in Stripe. It takes the ID of the invoice to finalize as an argument.

    Args:
        invoice_id_to_finalize (str): The ID of the invoice to finalize.

    Returns:
        Dict[str, Any]: A dictionary containing the Stripe invoice object that was finalized. Its structure is similar to the invoice object from `create_invoice`, with an updated status (e.g., "open"). It includes the following keys:
            id (str): Unique identifier for the invoice.
            object (str): String representing the object's type, typically "invoice".
            status (str): The status of the invoice, typically "open" after finalization.
            total (int): Total amount due in cents.
            customer (str): The ID of the customer.
            currency (str): Three-letter ISO currency code.
            due_date (Optional[int]): Unix timestamp of the due date. This field may not be present if no due date is set.
            lines (Dict[str, Any]): A Stripe list object containing invoice line items. This object includes:
                object (str): The type of object, typically "list".
                data (List[Dict[str, Any]]): An array of invoice line item objects. (The structure of these line items is detailed in the `create_invoice` method's documentation).
                has_more (bool): A flag indicating true if there are more line items to be fetched.
            livemode (bool): Indicates if the object exists in live mode (true) or test mode (false).

    Raises:
        InvalidRequestError: If the invoice_id_to_finalize ID is invalid, the invoice_id_to_finalize cannot be finalized (e.g., already finalized, no line items, or customer has no payment method for auto-payment).
        ResourceNotFoundError: If the specified invoice_id_to_finalize ID does not exist.
    """
    from stripe.invoice import finalize_invoice
    return finalize_invoice(invoice=invoice_id_to_finalize)
