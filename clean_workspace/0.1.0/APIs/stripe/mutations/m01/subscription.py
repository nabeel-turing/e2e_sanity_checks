# This file is automatically generated by the MutationBuilder

def retrieve_recurring_services(
    subscriber_client_id=None,
    plan_price_filter=None,
    filter_by_subscription_state=None,
    max_records_to_show=None
):
    """
    This tool will list all subscriptions in Stripe.

    This function lists all subscriptions in Stripe. It allows for filtering the
    subscriptions based on customer ID, price ID, status, and limiting the
    number of results returned.

    Args:
        subscriber_client_id (Optional[str]): The ID of the customer to list subscriptions for.
        plan_price_filter (Optional[str]): The ID of the price to list subscriptions for.
        filter_by_subscription_state (Optional[str]): The status of the subscriptions to retrieve. Possible
            values: 'active', 'past_due', 'unpaid', 'canceled', 'incomplete',
            'incomplete_expired', 'trialing', 'all'.
        max_records_to_show (Optional[int]): A limit on the number of objects to be returned.
            Limit can range between 1 and 100.

    Returns:
        Dict[str, Any]: A dictionary representing a Stripe list object containing
            subscriptions matching the query. This dictionary has the following keys:
            object (str): String representing the object's type, typically "list".
            data (List[Dict[str, Any]]): A list of dictionaries, where each
                dictionary represents a subscription. Each subscription
                dictionary includes:
                id (str): Unique identifier for the subscription.
                object (str): String representing the object's type, typically
                    "subscription".
                customer (str): ID of the customer this subscription belongs to.
                status (str): The status of the subscription (e.g., "active",
                    "past_due", "canceled", "trialing").
                current_period_start (int): Unix timestamp representing the start
                    of the current billing period.
                current_period_end (int): Unix timestamp representing the end
                    of the current billing period.
                created (int): Unix timestamp of when the subscription was created.
                items (Dict[str, Any]): A dictionary representing a Stripe list
                    object containing the subscription items for this subscription.
                    This dictionary includes the following keys:
                    object (str): String representing the object's type,
                        typically "list".
                    data (List[Dict[str, Any]]): A list of dictionaries, where
                        each dictionary represents a subscription item. Each
                        subscription item dictionary includes:
                        id (str): Unique identifier for the subscription item.
                        price (Dict[str, Any]): A dictionary representing the
                            price object associated with this subscription item.
                            This price dictionary includes:
                            id (str): Unique identifier for the price.
                            product (str): Unique identifier of the product
                                associated with this price.
                        quantity (int): The quantity of the price plan for this
                            item.
                    has_more (bool): True if there are more subscription items to
                        retrieve for this subscription's items list.
                livemode (bool): Indicates if the object exists in live mode (true)
                    or test mode (false).
                metadata (Optional[Dict[str, str]]): A set of key-value pairs
                    attached to the subscription object. Useful for storing
                    additional information.
            has_more (bool): True if there are more subscriptions to retrieve in
                subsequent requests (pagination).

    Raises:
        InvalidRequestError: If filter parameters are invalid (e.g., an
            unrecognized filter_by_subscription_state, a max_records_to_show outside the allowed range of 1-100,
            or an invalid ID format for subscriber_client_id or plan_price_filter).
        ApiError: For other general Stripe API errors, such as network issues
            or temporary service unavailability.
    """
    from stripe.subscription import list_subscriptions
    return list_subscriptions(
        customer=subscriber_client_id,
        price=plan_price_filter,
        status=filter_by_subscription_state,
        limit=max_records_to_show
    )


def terminate_customer_subscription(subscription_id_to_cancel):
    """
    Cancels a subscription in Stripe.

    This function cancels a subscription in Stripe. It requires the ID of the
    subscription to be canceled, which is passed as an argument.

    Args:
        subscription_id_to_cancel (str): The ID of the subscription to cancel.

    Returns:
        Dict[str, Any]: A dictionary detailing the Stripe subscription object that was canceled,
            including its updated status, with the following keys:
            id (str): Unique identifier for the subscription.
            object (str): String representing the object's type, typically 'subscription'.
            status (str): The status of the subscription (e.g., 'canceled', 'trialing', 'active'). After a successful cancellation, this is typically 'canceled'.
            customer (str): ID of the customer associated with this subscription.
            current_period_start (int): Unix timestamp indicating the start of the current billing period for the subscription.
            current_period_end (int): Unix timestamp indicating the end of the current billing period for the subscription. For canceled subscriptions, this often reflects the period active before cancellation.
            canceled_at (int): Unix timestamp indicating when the subscription was canceled. This field is populated once the cancellation is processed.
            items (Dict[str, Any]): An object representing the list of items in this subscription. It typically includes a 'data' key containing an array of subscription item objects, each detailing a specific product or plan within the subscription.
            livemode (bool): A boolean flag indicating whether the object exists in live mode (true) or test mode (false).

    Raises:
        InvalidRequestError: If the subscription_id_to_cancel ID is invalid or the subscription_id_to_cancel is in a state that cannot be canceled (e.g., already canceled or incomplete).
        ResourceNotFoundError: If the specified subscription_id_to_cancel ID does not exist.
    """
    from stripe.subscription import cancel_subscription
    return cancel_subscription(subscription=subscription_id_to_cancel)


def modify_recurring_service(
    subscription_id_to_update,
    proration_handling_rule=None,
    list_of_item_updates=None
):
    """
    This tool will update an existing subscription in Stripe. If changing an
    existing subscription item, the existing subscription item has to be set
    to deleted and the new one has to be added.

    Args:
        subscription_id_to_update (str): The ID of the subscription to update.
        proration_handling_rule (Optional[str]): Determines how to handle prorations
            when the subscription items change. Options: 'create_prorations',
            'always_invoice', 'none_implicit', 'none'.
        list_of_item_updates (Optional[List[Dict[str, Any]]]): A list of subscription items to
            update, add, or remove. Each item in the list is a dictionary that
            can contain the following keys:
            id (str): The ID of the subscription item to modify.
            price (str): The ID of the price to switch to.
            quantity (int): The quantity of the plan to subscribe to.
            deleted (bool): Whether to delete this item.

    Returns:
        Dict[str, Any]: A dictionary representing the Stripe subscription object
            that was updated. It includes the following key fields:
            id (str): Unique identifier for the subscription.
            object (str): String representing the object's type, always "subscription".
            status (str): The current status of the subscription (e.g., 'active',
                'trialing', 'past_due', 'canceled', 'unpaid').
            customer (str): ID of the customer this subscription belongs to.
            items (Dict[str, Any]): A dictionary representing the list of
                subscription items for this subscription. It contains:
                object (str): Type of the list object, typically "list".
                data (List[Dict[str, Any]]): A list of subscription item objects.
                    Each item object in this list is a dictionary that includes:
                    id (str): Unique identifier for the subscription item.
                    object (str): String representing the object's type, always
                        "subscription_item".
                    price (Dict[str, Any]): The price object associated with this
                        item. This dictionary includes the key fields:
                        id (str): Price ID.
                        product (str): ID of the product this price belongs to.
                        active (bool): Whether the price can be used for new
                            purchases.
                        currency (str): Three-letter ISO currency code.
                        unit_amount (Optional[int]): The unit amount in cents.
                        type (str): Price type, e.g., 'recurring' or 'one_time'.
                        recurring (Optional[Dict[str, Any]]): Details of the
                            recurring price, if applicable. This dictionary
                            can contain:
                            interval (str): Billing interval (e.g., 'month', 'year').
                            interval_count (int): Number of intervals between
                                subscription billings.
                    quantity (int): The quantity of the subscription item.
                    created (int): Timestamp (seconds since epoch) of when this
                        subscription item was created.
                    metadata (Optional[Dict[str, str]]): Set of key-value pairs
                        attached to the subscription item.
                has_more (bool): True if this list of subscription items has more
                    items to fetch.
            latest_invoice (Optional[str]): The ID of the most recent invoice for
                this subscription, if any.
            livemode (bool): True if the object exists in live mode, false if in
                test mode.
            cancel_at_period_end (bool): If true, the subscription will be
                canceled at the end of the current period.
            canceled_at (Optional[int]): Timestamp (seconds since epoch) of when
                the subscription was canceled, if applicable.
            created (int): Timestamp (seconds since epoch) of when the
                subscription was created.
            current_period_start (int): Timestamp (seconds since epoch) of the
                start of the current billing period.
            current_period_end (int): Timestamp (seconds since epoch) of the end
                of the current billing period.
            start_date (int): Timestamp (seconds since epoch) of the date the
                subscription started.
            ended_at (Optional[int]): Timestamp (seconds since epoch) of when the
                subscription ended, if applicable.
            trial_start (Optional[int]): Timestamp (seconds since epoch) of when
                the trial period started, if applicable.
            trial_end (Optional[int]): Timestamp (seconds since epoch) of when the
                trial period ended, if applicable.
            default_payment_method (Optional[str]): ID of the default payment
                method for this subscription.
            discount (Optional[Dict[str, Any]]): Information about the discount
                applied to this subscription. This dictionary includes key fields:
                id (str): The ID of the discount object.
                coupon (Dict[str, Any]): The coupon that was applied. This
                    dictionary includes:
                    id (str): Coupon ID.
                    name (Optional[str]): Name of the coupon.
                    valid (bool): Whether the coupon is currently valid.
            metadata (Optional[Dict[str, str]]): Set of key-value pairs attached
                to the subscription.

    Raises:
        InvalidRequestError: If input parameters are invalid
        ResourceNotFoundError: If the specified subscription_id_to_update ID or a price ID within 'list_of_item_updates' does not exist.
        ValidationError: If input arguments fail validation.
    """
    from stripe.subscription import update_subscription
    return update_subscription(
        subscription=subscription_id_to_update,
        proration_behavior=proration_handling_rule,
        items=list_of_item_updates
    )
