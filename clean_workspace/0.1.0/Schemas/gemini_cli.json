[
  {
    "name": "glob",
    "description": "Find files matching a glob pattern, sorted by modification time (newest first).\n\nThis function searches for files matching the specified glob pattern within the\ngiven directory (or workspace root if not specified). Results are sorted with\nrecently modified files (within 24 hours) appearing first by modification time,\nfollowed by older files sorted alphabetically.",
    "parameters": {
      "type": "object",
      "properties": {
        "pattern": {
          "type": "string",
          "description": "The glob pattern to match files against. Supports wildcards\nlike '*.py', '**/*.md', 'src/**/*.ts', etc."
        },
        "path": {
          "type": "string",
          "description": "The absolute path to the directory to search within.\nIf not provided, searches the workspace root. Must be within workspace."
        },
        "case_sensitive": {
          "type": "boolean",
          "description": "Whether the pattern matching should be\ncase-sensitive. Defaults to False for case-insensitive matching."
        },
        "respect_git_ignore": {
          "type": "boolean",
          "description": "Whether to respect .gitignore patterns\nwhen finding files. Only applies if in a git repository. Defaults to True."
        }
      },
      "required": [
        "pattern"
      ]
    }
  },
  {
    "name": "list_directory",
    "description": "List the direct children of a workspace directory.",
    "parameters": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string",
          "description": "Absolute directory path to list. Must reside inside the\nworkspace root stored in SimulationEngine.db.DB."
        },
        "ignore": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Glob patterns to exclude from the\nlisting, for example ['*.log', 'node_modules']. Defaults to None."
        }
      },
      "required": [
        "path"
      ]
    }
  },
  {
    "name": "read_file",
    "description": "Read content from a file in the simulated workspace.\n\nReads and returns the content of a specified file from the local filesystem.\nHandles text, images (PNG, JPG, GIF, WEBP, SVG, BMP), and PDF files. For text \nfiles, it can read specific line ranges with pagination support.",
    "parameters": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string",
          "description": "Absolute path of the file to read. Must be located under\nthe configured workspace_root and not be ignored by .geminiignore patterns."
        },
        "offset": {
          "type": "integer",
          "description": "For text files only, the 0-based line number to start \nreading from. Requires 'limit' to be set. Use for paginating through large files."
        },
        "limit": {
          "type": "integer",
          "description": "For text files only, maximum number of lines to read. \nUse with 'offset' to paginate through large files. If omitted, reads up to \n2000 lines by default. Also enforces a per-line length cap of 2000 characters."
        }
      },
      "required": [
        "path"
      ]
    }
  },
  {
    "name": "read_many_files",
    "description": "Read content from multiple files specified by paths or glob patterns.\n\nThis function reads and concatenates content from multiple files. For text files,\nit concatenates their content with separators. For image/PDF files explicitly\nrequested, it returns them as base64-encoded data.",
    "parameters": {
      "type": "object",
      "properties": {
        "paths": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Required. Array of glob patterns or paths relative to the\nworkspace root. Examples: ['src/**/*.py'], ['README.md', 'docs/']"
        },
        "include": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Additional glob patterns to include. These are\nmerged with `paths`. Example: [\"*.test.py\"] to add test files."
        },
        "exclude": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Glob patterns for files/directories to exclude.\nAdded to default excludes if useDefaultExcludes is True."
        },
        "recursive": {
          "type": "boolean",
          "description": "Whether to search recursively. Primarily controlled\nby `**` in glob patterns. Defaults to True."
        },
        "useDefaultExcludes": {
          "type": "boolean",
          "description": "Whether to apply default exclusion patterns\n(e.g., node_modules, .git, binary files). Defaults to True."
        },
        "respect_git_ignore": {
          "type": "boolean",
          "description": "Whether to respect .gitignore patterns.\nDefaults to True (note: simplified implementation for simulation)."
        }
      },
      "required": [
        "paths"
      ]
    }
  },
  {
    "name": "replace",
    "description": "Perform surgical string replacement with multi-stage self-correction.\n\nThis function implements a sophisticated replacement workflow: checkpoint → diff → write.\nIt performs exact string matching and replacement with intelligent error correction,\nvalidation of expected replacement counts, and comprehensive error handling.\n\nThe function can create new files (when old_string is empty) or perform precise\nreplacements in existing files. It includes multi-stage self-correction to handle\ncommon issues like string escaping problems or whitespace mismatches.",
    "parameters": {
      "type": "object",
      "properties": {
        "file_path": {
          "type": "string",
          "description": "Absolute path to the file to modify. Must be within workspace."
        },
        "old_string": {
          "type": "string",
          "description": "Exact literal text to replace. Must include sufficient context\n(3+ lines before/after) for unique identification. Use empty string to create new file."
        },
        "new_string": {
          "type": "string",
          "description": "Exact literal text to replace old_string with. Must be the\ncomplete replacement text with correct whitespace and formatting."
        },
        "expected_replacements": {
          "type": "integer",
          "description": "Number of replacements expected. Defaults to 1.\nUse when replacing multiple occurrences of the same string."
        },
        "modified_by_user": {
          "type": "boolean",
          "description": "Whether the edit was modified manually by the user.\nUsed for tracking user modifications. Defaults to None."
        }
      },
      "required": [
        "file_path",
        "new_string",
        "old_string"
      ]
    }
  },
  {
    "name": "run_shell_command",
    "description": "Execute a shell command in the simulated workspace environment with all advanced features.\n\nThis function executes shell commands with proper security validation,\nprocess management, and workspace integration. Commands are executed\nin a temporary environment that mirrors the workspace state.\n\nIMPORTANT: For any command that expects user interaction or uses a pager\n(like git diff, git log, less, head, tail, more, etc.), you MUST append\n' | cat' to the command string yourself before passing it to this function.\nFailure to do so will cause the command to hang or fail.",
    "parameters": {
      "type": "object",
      "properties": {
        "command": {
          "type": "string",
          "description": "The shell command to execute. Must be a valid shell command."
        },
        "description": {
          "type": "string",
          "description": "Brief description of the command's purpose."
        },
        "directory": {
          "type": "string",
          "description": "Directory to execute the command in, relative to\nworkspace root. If not provided, uses current working directory."
        },
        "background": {
          "type": "boolean",
          "description": "Whether to run the command in background.\nBackground commands return immediately with a process ID.\n        "
        }
      },
      "required": [
        "command"
      ]
    }
  },
  {
    "name": "save_memory",
    "description": "Save a specific piece of information or fact to long-term memory.\n\nUse this function when the user explicitly asks you to remember something,\nor when they state a clear, concise fact that seems important to retain\nfor future interactions.",
    "parameters": {
      "type": "object",
      "properties": {
        "fact": {
          "type": "string",
          "description": "The specific fact or piece of information to remember.\nShould be a clear, self-contained statement."
        }
      },
      "required": [
        "fact"
      ]
    }
  },
  {
    "name": "search_file_content",
    "description": "Search for a regular expression pattern within file contents.\n\nThis function searches for the specified regex pattern within the content of files\nin the given directory (or workspace root if not specified). It uses a pure Python\nimplementation to search through text files and returns matches with line numbers\nand content.",
    "parameters": {
      "type": "object",
      "properties": {
        "pattern": {
          "type": "string",
          "description": "The regular expression pattern to search for within file contents.\nMust be a valid regex pattern (e.g., 'function\\s+myFunction', 'import\\s+\\{.*\\}')."
        },
        "path": {
          "type": "string",
          "description": "The absolute path to the directory to search within.\nIf not provided, searches the workspace root. Must be within workspace."
        },
        "include": {
          "type": "string",
          "description": "A glob pattern to filter which files are searched\n(e.g., '*.js', '*.{ts,tsx}', 'src/**'). If not provided, searches all files\n(respecting common ignore patterns)."
        }
      },
      "required": [
        "pattern"
      ]
    }
  },
  {
    "name": "write_file",
    "description": "Write content to a specified file, creating parent directories if needed.\n\nThis function writes the provided content to the specified file path. If the file\nalready exists, it will be overwritten. If the file doesn't exist, it (and any\nnecessary parent directories) will be created. The operation executes immediately\nwithout user approval or confirmation prompts.",
    "parameters": {
      "type": "object",
      "properties": {
        "file_path": {
          "type": "string",
          "description": "The absolute path to the file to write to. Must be within\nthe workspace root."
        },
        "content": {
          "type": "string",
          "description": "The content to write to the file. This will completely replace\nany existing content in the file."
        },
        "modified_by_user": {
          "type": "boolean",
          "description": "Whether the proposed content was modified\nby the user. Defaults to None."
        }
      },
      "required": [
        "content",
        "file_path"
      ]
    }
  }
]