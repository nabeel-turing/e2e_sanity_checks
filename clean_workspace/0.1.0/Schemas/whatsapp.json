[
  {
    "name": "download_media",
    "description": "Download media from a WhatsApp message and get the local file path.\n\nThis function downloads media content from a specific WhatsApp message. It uses the provided message ID and chat JID to locate the message, attempts to retrieve its media, and if successful, saves the media to a local file. The function then returns a dictionary detailing the outcome of this operation, including the success status, a message, and the path to the downloaded file.",
    "parameters": {
      "type": "object",
      "properties": {
        "message_id": {
          "type": "string",
          "description": "The ID of the message containing the media."
        },
        "chat_jid": {
          "type": "string",
          "description": "The JID of the chat containing the message."
        }
      },
      "required": [
        "chat_jid",
        "message_id"
      ]
    }
  },
  {
    "name": "get_chat",
    "description": "Get WhatsApp chat metadata by JID.\n\nThis function retrieves metadata for a WhatsApp chat identified by its\nJabber Identifier (JID). It can also include the last message of the\nchat if specified.",
    "parameters": {
      "type": "object",
      "properties": {
        "chat_jid": {
          "type": "string",
          "description": "The JID of the chat to retrieve."
        },
        "include_last_message": {
          "type": "boolean",
          "description": "Whether to include the last message (default True)."
        }
      },
      "required": [
        "chat_jid"
      ]
    }
  },
  {
    "name": "get_contact_chats",
    "description": "Get all WhatsApp chats involving the contact.\n\nThis function retrieves all WhatsApp chats that involve the contact specified by their JID.\nThe number of chats returned can be controlled using `limit`, and `page` allows for\nfetching subsequent sets of chats.",
    "parameters": {
      "type": "object",
      "properties": {
        "jid": {
          "type": "string",
          "description": "The contact's JID to search for."
        },
        "limit": {
          "type": "integer",
          "description": "Maximum number of chats to return. Defaults to 20."
        },
        "page": {
          "type": "integer",
          "description": "Page number for pagination. Defaults to 0."
        }
      },
      "required": [
        "jid"
      ]
    }
  },
  {
    "name": "get_direct_chat_by_contact",
    "description": "Get WhatsApp chat metadata by sender phone number.\n\nThis function retrieves metadata for a direct WhatsApp chat associated with a\nspecific sender's phone number.",
    "parameters": {
      "type": "object",
      "properties": {
        "sender_phone_number": {
          "type": "string",
          "description": "The phone number to search for."
        }
      },
      "required": [
        "sender_phone_number"
      ]
    }
  },
  {
    "name": "get_last_interaction",
    "description": "Gets the most recent WhatsApp message involving the contact.\n\nThis function gets the most recent WhatsApp message that was either sent to\nor received from the contact specified by the JID.",
    "parameters": {
      "type": "object",
      "properties": {
        "jid": {
          "type": "string",
          "description": "The JID of the contact to search for."
        }
      },
      "required": [
        "jid"
      ]
    }
  },
  {
    "name": "get_message_context",
    "description": "Get context around a specific WhatsApp message.\n\nThis function retrieves context around a specific WhatsApp message. It allows specifying the number of messages to fetch before and after the identified target message, aiding in understanding the conversation flow around that particular message.",
    "parameters": {
      "type": "object",
      "properties": {
        "message_id": {
          "type": "string",
          "description": "The ID of the message to get context for."
        },
        "before": {
          "type": "integer",
          "description": "Number of messages to include before the target message. Defaults to 5."
        },
        "after": {
          "type": "integer",
          "description": "Number of messages to include after the target message. Defaults to 5."
        }
      },
      "required": [
        "message_id"
      ]
    }
  },
  {
    "name": "list_chats",
    "description": "Get WhatsApp chats matching specified criteria.\n\nThis function retrieves WhatsApp chats based on specified criteria.\nThese criteria include an optional search term to filter chats by name or\nJID, a limit on the maximum number of chats to return, a page number\nfor pagination, an option to include the last message in each chat,\nand a field to sort results by (either \"last_active\" or \"name\").",
    "parameters": {
      "type": "object",
      "properties": {
        "query": {
          "type": "string",
          "description": "Optional search term to filter chats by name or JID.\nDefaults to None."
        },
        "limit": {
          "type": "integer",
          "description": "Maximum number of chats to return. Defaults to 20."
        },
        "page": {
          "type": "integer",
          "description": "Page number for pagination. Defaults to 0."
        },
        "include_last_message": {
          "type": "boolean",
          "description": "Whether to include the last message in each chat.\nDefaults to True."
        },
        "sort_by": {
          "type": "string",
          "description": "Field to sort results by, either \"last_active\" or \"name\".\nDefaults to \"last_active\"."
        }
      }
    }
  },
  {
    "name": "list_messages",
    "description": "Get WhatsApp messages matching specified criteria with optional context.",
    "parameters": {
      "type": "object",
      "properties": {
        "after": {
          "type": "string",
          "description": "ISO 8601 datetime string. Only return messages after this time."
        },
        "before": {
          "type": "string",
          "description": "ISO 8601 datetime string. Only return messages before this time."
        },
        "sender_phone_number": {
          "type": "string",
          "description": "Filter messages by sender's phone number."
        },
        "chat_jid": {
          "type": "string",
          "description": "Filter messages by chat JID (must contain '@')."
        },
        "query": {
          "type": "string",
          "description": "Search for messages containing this text (case-insensitive)."
        },
        "limit": {
          "type": "integer",
          "description": "Maximum number of messages to return. Defaults to 20."
        },
        "page": {
          "type": "integer",
          "description": "Page number for pagination (0-based). Defaults to 0."
        },
        "include_context": {
          "type": "boolean",
          "description": "Whether to include surrounding messages. Defaults to True."
        },
        "context_before": {
          "type": "integer",
          "description": "Number of messages to include before each match. Defaults to 1."
        },
        "context_after": {
          "type": "integer",
          "description": "Number of messages to include after each match. Defaults to 1."
        }
      }
    }
  },
  {
    "name": "search_contacts",
    "description": "Search WhatsApp contacts by name or phone number.\n\nThis function searches WhatsApp contacts by name or phone number.\nIt uses the provided query term to match against contact names or phone numbers.",
    "parameters": {
      "type": "object",
      "properties": {
        "query": {
          "type": "string",
          "description": "Search term to match against contact names or phone numbers."
        }
      },
      "required": [
        "query"
      ]
    }
  },
  {
    "name": "send_audio_message",
    "description": "Send any audio file as a WhatsApp audio message to the specified recipient.\n\nFor group messages, the JID is used for the recipient. If an error occurs due to ffmpeg not being installed or conversion failing, an attempt is made to send the original file as a generic audio message. The function sends the audio file specified by `media_path`; this file is converted to Opus .ogg if it is not already a .ogg file.",
    "parameters": {
      "type": "object",
      "properties": {
        "recipient": {
          "type": "string",
          "description": "The recipient - either a phone number with country code but no + or other symbols, or a JID (e.g., \"123456789@s.whatsapp.net\" or a group JID like \"123456789@g.us\")."
        },
        "media_path": {
          "type": "string",
          "description": "The absolute path to the audio file to send (will be converted to Opus .ogg if it's not a .ogg file)."
        }
      },
      "required": [
        "media_path",
        "recipient"
      ]
    }
  },
  {
    "name": "send_file",
    "description": "Send a file such as a picture, raw audio, video or document via WhatsApp to the specified recipient.\n\nThis function sends various types of media files (images, videos, documents, audio) to a WhatsApp contact or group.\nThe file type is automatically detected based on the file extension and MIME type.",
    "parameters": {
      "type": "object",
      "properties": {
        "recipient": {
          "type": "string",
          "description": "The recipient - either a phone number with country code but no + or other symbols, or a JID (e.g., \"123456789@s.whatsapp.net\" or a group JID like \"123456789@g.us\")."
        },
        "media_path": {
          "type": "string",
          "description": "The absolute path to the media file to send."
        },
        "caption": {
          "type": "string",
          "description": "Optional caption text to accompany the media file."
        }
      },
      "required": [
        "media_path",
        "recipient"
      ]
    }
  },
  {
    "name": "send_message",
    "description": "Send a WhatsApp message to a person or group.\n\nThis function sends a WhatsApp message to a specified person or group.\nFor group chats, the JID (Jabber ID) must be used as the recipient identifier.\nYou can optionally reply to a specific message by providing its message ID.",
    "parameters": {
      "type": "object",
      "properties": {
        "recipient": {
          "type": "string",
          "description": "The recipient - either a phone number with country code\nbut no + or other symbols, or a JID (e.g.,\n'123456789@s.whatsapp.net' or a group JID like\n'123456789@g.us')."
        },
        "message": {
          "type": "string",
          "description": "The message text to send."
        },
        "reply_to_message_id": {
          "type": "string",
          "description": "The ID of the message to reply to. If provided,\nthe new message will be sent as a reply to the specified message."
        }
      },
      "required": [
        "message",
        "recipient"
      ]
    }
  }
]